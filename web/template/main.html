{{/* This is the landing page for the PriCoSha website. */}}
<!DOCTYPE html>
<html>
<title>
    PriCoSha
</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://www.w3schools.com/lib/w3-theme-blue-grey.css">
<link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Open+Sans'>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
    html,
    body,
    h1,
    h2,
    h3,
    h4,
    h5 {
        font-family: "Open Sans", sans-serif
    }
</style>

<div class="w3-sidebar w3-light-grey w3-card" style="width:160px">
    <a href="/" class="w3-bar-item w3-button w3-block w3-left-align"><i class="fa fa-fw fa-home"></i>Home</a>
    <a href="/profile" class="w3-bar-item w3-button w3-block w3-left-align"><i class="fa fa-fw fa-user"></i>Profile</a>

    <button class="w3-button w3-block w3-left-align" onclick="myAccFunc()">
        <i class="fa fa-fw fa-address-book"></i>Friends <i class="fa fa-caret-down"></i>
    </button>
    <div id="demoAcc" class="w3-bar-block w3-hide w3-white w3-card-4">
        <a href="#" class="w3-bar-item w3-button">Add Friend</a>
        <a href="#" class="w3-bar-item w3-button">Friend Groups</a>
    </div>
    <a href="/tag_manager" class="w3-bar-item w3-button w3-block w3-left-align"><i class="fa fa-fw fa-tags"></i>Tag
        Manager</a>
    {{ $iflogged := .Logged}}
    {{if $iflogged}}
    <a href="/logout" class="w3-bar-item w3-button w3-block w3-left-align"><i class="fa fa-fw fa-sign-out"></i>Logout</a>
    {{else}}
    <a href="/login" class="w3-bar-item w3-button w3-block w3-left-align"><i class="fa fa-fw fa-sign-in"></i>Login</a>
    {{end}}
</div>


<!-- <div class="sidebar">
    <a class="active" href="/"><i class="fa fa-fw fa-home"></i>Home</a>
    <a href=""><i class="fa fa-fw fa-user"></i>Profile</a>
    <a href="/tag_manager"><i class="fa fa-fw fa-tags"></i>Tag Manager</a>
    {{ $iflogged := .Logged}}
    {{if $iflogged}}
    <a href="/logout"><i class="fa fa-fw fa-sign-out"></i>Logout</a>
    {{else}}
    <a href="/login"><i class="fa fa-fw fa-sign-in"></i>Login</a>
    {{end}}
</div> -->


<div class="w3-content">
    {{range .PubData}}
    <div class="w3-container w3-card w3-white w3-round w3-margin" style="width:50%"><br>
        <span class="w3-right w3-opacity">{{.PostTime}}</span>
        <h4>{{.Email}}</h4><br>
        <hr class="w3-clear">
        <img src="https://www.w3schools.com/w3images/lights.jpg" style="width:100%" alt="{{.FileName}}" class="w3-margin-bottom">
        <p>{{.FileName}} {{.FilePath}}</p>
    </div>
    {{end}}

    <!-- <div class="w3-content">

        <body>
            <h1>
                PriCoSha
                </title>
                <meta charset="UTF-8">
                <link href="assets/css/stylesheet.css" rel="stylesheet" type="text/css" />

                <body>
                    <div style="float:right">
                        {{ $iflogged := .Logged}}
                        {{if $iflogged}}
                        Logged in as: <b>{{.Username}}
                            {{end}}
                    </div>
            </h1>
            <hr>
            <h2>
                Public Content:
            </h2>
            <table cellspacing="20">
                <tr>
                    <th>Item ID</th>
                    <th>Item Name</th>
                    <th>File Path</th>
                    <th>Author</th>
                    <th>Time Posted</th>
                </tr>
                {{ range .PubData }}
                <tr>
                    <td>{{ .ItemID }}</td>
                    <td>{{ .FileName }}</td>
                    <td>{{ .FilePath }}</td>
                    <td>{{ .Email }}</td>
                    <td>{{ .PostTime }}</td>
                </tr>
                {{if $iflogged}}
                <tr>
                    <td colspan="5">
                        <button onclick="openForm()" id="tag-button">Tag someone</button>
                        <div class="tag-form-popup" id="tag-form" style="display: none">
                            <form action="/addtag/{{.ItemID}}" method="POST">
                                <label for="username">Username:</label>
                                <input type="text" name="username" required>
                                <input type="submit" value="Tag!">
                                <input type="button" onclick="closeForm()" value="Close">
                            </form>
                        </div>
                    </td>
                </tr>
                {{end}}
                {{ else }}
                {{/* if the range is empty show this */}}
                <tr>
                    <td colspan="5">No Items Available!<td>
                </tr>
                {{ end }}
                <script>
                    function openForm() {
                        document.getElementById("tag-form").style.display = "block";
                        document.getElementById("tag-button").style.display = "none";
                    }

                    function closeForm() {
                        document.getElementById("tag-form").style.display = "none";
                        document.getElementById("tag-button").style.display = "block";
                    }
                </script>
        </body>
    </div> -->

    <script>
        function myAccFunc() {
            var x = document.getElementById("demoAcc");
            if (x.className.indexOf("w3-show") == -1) {
                x.className += " w3-show";
                x.previousElementSibling.className += " w3-green";
            } else {
                x.className = x.className.replace(" w3-show", "");
                x.previousElementSibling.className =
                    x.previousElementSibling.className.replace(" w3-green", "");
            }
        }
    </script>

</html>