{{/* This is the landing page for the PriCoSha website. */}}
<!DOCTYPE html>
<html>
	<title>
		PriCoSha
	</title>
	<meta charset="UTF-8">
	<link href="assets/css/stylesheet.css" rel="stylesheet" type="text/css" />
	<body>
		<h1>
			PriCoSha
			<div style="float:right">
				{{ $iflogged := .Logged}}
				{{if $iflogged}}
				Logged in as: <b>{{.Username}}</b> <a href="/logout">Logout!</a>
				{{else}}
				<a href="/login">Login!</a>
				{{end}}
			</div>
		</h1>
		<hr>
		<h2>
			Public Content:
		</h2>
		<table cellspacing="20">
			<tr>
				<th>Item ID</th>
				<th>Item Name</th>
				<th>File Path</th>
				<th>Author</th>
				<th>Time Posted</th>
			</tr>
			{{ range .PubData }}
			<tr>
				<td>{{ .ItemID }}</td>
				<td>{{ .FileName }}</td>
				<td>{{ .FilePath }}</td>
				<td>{{ .Email }}</td>
				<td>{{ .PostTime }}</td>
			</tr>
				{{if $iflogged}}
				<tr>
					<td colspan="5">
						<button onclick="openForm({{.ItemID}})" id="tag-button-{{.ItemID}}">Tag someone</button>
						<div class="tag-form-popup" id="tag-form-{{.ItemID}}" style="display: none">
							<form action="/addtag?id={{.ItemID}}" method="POST">
								<label for="username">Username:</label>
								<input type="text" name="username" required>
								<input type="submit" value="Tag!">
								<input type="button" onclick="closeForm({{.ItemID}})" value="Close">
							</form>
						</div>
					</td>
				</tr>
				{{end}}
			{{ else }}
			{{/* if the range is empty show this */}}
			<tr><td colspan="5">No Items Available!<td></tr>
			{{ end }}
			<script>
				function openForm(ID) {
					document.getElementById("tag-form-"+ID).style.display = "block";
					document.getElementById("tag-button-"+ID).style.display = "none";
				}
	
				function closeForm(ID) {
					document.getElementById("tag-form-"+ID).style.display = "none";
					document.getElementById("tag-button-"+ID).style.display = "block";
				}
			</script>
	</body>
</html>
